<script>
require(['jquery'], function($) {
    'use strict';
    
    $(document).ready(function() {
        if (typeof window.productGalleryConfig !== 'undefined') {
            window.productGalleryConfig.uploaderConfig.url = '<?= $block->getUrl('productupload/productgallery/upload') ?>';
        }
        
        // Also update any existing instances
        $('div[data-role="image-panel"]').each(function() {
            var $element = $(this);
            if ($element.data('mageProductGallery')) {
                var gallery = $element.data('mageProductGallery');
                if (gallery && gallery.uploaderConfig) {
                    gallery.uploaderConfig.url = '<?= $block->getUrl('productupload/productgallery/upload') ?>';
                }
            }
        });
    });
});
</script>